{% import 'website/macros.html' as macro with context %}

{% macro render_navbar() %}
    {% call navbar() %}
        {{ nav_link('Home', url_for('site.index'))}}
        {{ nav_link('Photos', url_for('shop.index_view')) }}
        {{ nav_link('Services', url_for('site.services')) }}
        <a class="navbar-brand large-logo" href="{{url_for('site.index')}}">
            <img src="http://placehold.it/60x60" alt="logo large fairy light event photography">
        </a>
        {{ nav_link('About', url_for('site.about')) }}
        {{ nav_link('Portfolio', url_for('site.portfolio')) }}
        {{ nav_link('Contact', url_for('site.index') + '#contact') }}
    {% endcall %}
{% endmacro %}

{% macro navbar() %}
    <div id="navbar" class="outer-nav">
        <div class="container">
            <nav class="navbar navbar-expand-md navbar-dark bg-dark">
                <a class="navbar-brand small-logo-mobile" href="{{url_for('site.index')}}">
                    <img src="http://placehold.it/50x50" width="50" height="50" alt="logo small fairy light event photograhy design">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav main-nav nav-fill align-items-center">
                   {{caller()}}
                </ul>
                </div>
            </nav>
        </div>
    </div>
{% endmacro %}

{% macro nav_link(name, url) -%}
    {% if request.endpoint.endswith(url) %}
        <li class="nav-item active">
            <a class="nav-link" href="{{url}}">{{name|upper}}
                <span class="sr-only">
                    (current)
                </span>
            </a>
        </li>
    {% else %}
        <li class="nav-item">
            <a class="nav-link" href="{{url}}">{{name|upper}}</a>
        </li>
	{% endif %}
{% endmacro %}

{% macro render_footer() %}
    {% call footer() %}
        {{footer_link('Home', url_for('site.index',))}}
        {{footer_link('About', url_for('site.index'))}}
    {% endcall %}
{% endmacro %}

{% macro footer_link(name, url) %}
    <li>
        <a href="{{url}}">{{name}}</a>
    </li>
{% endmacro %}

{% macro footer(facebook='', instagram='') %}
    <footer id="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-6 footer-info">
                        <h3>
                            Fairy Light
                        </h3>
                        <p>
                            Cras fermentum odio eu feugiat lide par naso tierra. Justo eget nada terra videa magna derita valies darta donna mare fermentum iaculis eu non diam phasellus. Scelerisque felis imperdiet proin fermentum leo. Amet volutpat consequat mauris nunc congue.
                        </p>
                    </div>
                    <div class="col-lg-3 col-md-6 footer-links">
                        <h4>
                            Useful Links
                        </h4>
                        <ul>
                            {{ caller() }}
                        </ul>
                    </div>
                    <div class="col-lg-3 col-md-6 footer-contact">
                        <h4>
                            Contact Us
                        </h4>
                        <p>
                            1111 Street Street
                            <br>
                            City cty, 9999
                            <br>
                            Country
                            <br>
                            <strong>Phone:</strong>
                            <a href="tel:0036111111111">
                                +36 11 1111 111
                            </a>
                            <br>
                            <strong>Email:</strong>
                            <a href="mailto:example@test.com">
                                example@test.com
                            </a>
                            <br>
                        </p>
                        <div class="social-links">
                            {% if facebook %}
                                <a href="{{ facebook }}" class="facebook">
                                    <i class="fa fa-facebook"></i>
                                </a>
                            {% endif %}
                            {% if instagram %}
                            <a href="{{ instagram }}" class="instagram">
                                <i class="fa fa-instagram"></i>
                            </a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 footer-newsletter">
                        <h4>
                            Our Newsletter
                        </h4>
                        <p>
                            Tamen quem nulla quae legam multos aute sint culpa legam noster magna veniam enim veniam illum dolore legam minim quorum culpa amet magna export quem marada parida nodela caramase seza.
                        </p>
                        {{ macro.subscribe() }}
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="copyright">
                Â© Copyright
                <strong>Fairy Light</strong>
                . All Rights Reserved
            </div>
        </div>
    </footer>
{% endmacro %}

{% macro cart(url, counter=0, hide_if_empty=True) %}
    <div id="outer-cart" class="container" >
        <div id="shopping-cart" style="display: {{'none' if (counter == 0) and hide_if_empty else 'block'}};">
            <a class="hi-icon" data-toggle="modal" data-target="#shopping-cart-modal">
                <span class="fa-stack fa-2x has-badge" data-count="{{counter}}">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-shopping-cart fa-stack-1x fa-inverse"></i>
                </span>
            </a>
        </div>
	</div>
{% endmacro %}

{% macro cart_modal_backup(url) %}
	<div class="modal fade" id="shopping-cart-modal" tabindex="-1" role="dialog" aria-labelledby="shopping-cart-modal-label" aria-hidden="true">
	  <div class="modal-dialog" role="document">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title" id="shopping-cart-modal-label">Shopping Cart</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
			  <span aria-hidden="true">&times;</span>
			</button>
		  </div>
		  <div id="shopping-cart-content" class="modal-body">
			<div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div>
		  </div>
		  <div class="modal-footer justify-content-end">
			<span class="amount-title">
				Total:
			</span>
			<span class="amount-amount">
				$20
			</span>
		  </div>
		  <div class="modal-footer justify-content-between">
			<button type="button" class="btn btn-secondary " data-dismiss="modal">Back</button>
			<a class="btn btn-primary " href="{{url}}">View Cart</a>
		  </div>
		</div>
	  </div>
	</div>
{% endmacro %}

{% macro cart_modal(url, total) %}
    {% call modal_base(id='shopping-cart-modal', animation=['fade']) %}
        {% call modal_header() %}
            <h5 class="modal-title" id="shopping-cart-modal-label">Shopping Cart</h5>
        {% endcall %}
        {% call modal_body(id="shopping-cart-content") %}
        <div class="d-flex justify-content-center"><div class="spinner-border" role="status"><span class="sr-only">Loading...</span></div></div>
        {% endcall %}
        {% call modal_footer(class='justify-content-between') %}
            <button type="button" class="btn btn-secondary " data-dismiss="modal">Back</button>
			<a class="btn btn-primary " href="{{url}}">View Cart</a>
        {% endcall %}
    {% endcall %}
{% endmacro %}

{% macro modal_base(id='', animation='fade', class='') %}
    <div class="modal {{animation if animation is iterable and animation is not string else [animation] |join(' ')}}" tabindex="-1" role="dialog" aria-labelledby="{{id}}-label" aria-hidden="true" id="{{id}}">
        <div class="modal-dialog {{class if class is iterable and class is not string else [class] |join(' ') }}" role="document">
            <div class="modal-content">
                {{ caller() }}
            </div>
        </div>
    </div>
{% endmacro %}

{% macro modal_header(class='') %}
    <div class="modal-header {{class if class is iterable and class is not string else [class] |join(' ') }}">
        {{ caller() }}
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
{% endmacro %}

{% macro modal_body(id='', class='') %}
    <div class="modal-body {{class if class is iterable and class is not string else [class] |join(' ') }}" id="{{id}}">
        {{ caller() }}
    </div>
{% endmacro %}

{% macro modal_footer(class='') %}
    <div class="modal-footer {{class if class is iterable and class is not string else [class] |join(' ') }}">
        {{ caller() }}
      </div>
{% endmacro %} 