{% import 'website/static.html' as site_static with context %}
{% import 'modules/social_media.html' as sharer with context %}

{% macro album(element) %}
    <div class="card text-center" style="position: relative;">
        <div class="album-cover">
            <a href="{{element.url_category}}">
                <span>
                    <img class="card-img-top" src="{{element.thumbnail}}" width="253" height="220" alt="{{element.title|lower}}">
                    <div class="album-title-overlay">                            
                        <h4>{{element.title}}</h4>
                    </div>
                </span>
            </a>                        
            <div class="album-social-overlay">
                <div class="pull-left">
                    <i class="fa fa-picture-o" aria-hidden="true"></i>
                    <span>{{element.num_of_images}}</span>                                
                </div>
                <div class="pull-right pictures-share">
                    {{sharer.facebook_share(element.title, element.url_facebook_share, element.thumbnail)}}        
                </div>
            </div>
        </div>
        {% if element.can_buy %}        
            <div class="card-body text-left">
                <p class="mb-1">Buy {{element.num_of_images}} picture now for</p>
                <div class="album-discount">
                    <ins>
                        <span>{{element.discounted_price|shop.format_price}}</span>
                    </ins>
                    {% if element.discounted_price != element.original_price %}
                        <del>
                            <span>{{element.original_price|shop.format_price}}</span>
                        </del>
                    {% endif %}
                </div>
                <div class="mt-2">
                    <a href="{{element.url_add_to_cart}}" class="btn btn-primary album-detail w-100" data-toggle="modal" data-target="#exampleModalLong">ADD ALBUM TO CART</a>    
                </div>                        
            </div>
        {% endif %}
    </div>
{% endmacro %}

{% macro image(element) %}
    <div class="card text-center">
        <div class="album-cover">
            <a class="popup-item" href="{{element.url_image}}">
                <img class="card-img-top" src="{{element.thumbnail}}" width="253" height="220" alt="{{element.title|lower}}">
            </a>                        
            <div class="album-social-overlay">
                <div class="pull-right pictures-share">
                    {{sharer.facebook_share('High definition image', element.url_facebook_share, element.thumbnail)}}    
                </div>
            </div>
        </div>
        <div class="card-body text-left">
            <div class="album-discount">
                <ins>
                    <span>{{element.discounted_price|shop.format_price}}</span>
                </ins>
            </div>
            <div class="mt-2">
                <a href="{{element.url_add_to_cart}}" data-animate="true" class="btn btn-primary cart-add w-100">ADD TO CART</a>    
            </div>                        
        </div>
    </div>
{% endmacro %}

{% macro render(id, type, endpoint, cart='#', image=None, title=None, price=None) %}
    <div class="card photos-buy-card" data-id="{{id}}" data-type="{{type}}">
        <div class="photos-photo">
            <a href="{{endpoint}}">
                <img class="card-img-top photos-img-size" src="{{image if image else site_static.url(filename='site/img/category_default.jpg')}}">
            </a>
        </div>
        <div class="card-body text-center">
            {% if title %}
                <h4 class="photos-title">{{title}}</h4>
            {% endif %}
            <div class="photos-price price-drop {{ 'price-hidden' if price is none }}">
                <del>
                    {% if price is iterable %}
                        <span class="amount">€{{price[0]}}</span>
                    {% endif %}
                </del>
                <ins>
                    {% if price is iterable %}
                        <span class="amount pl-md-2">€{{price[1]}}</span>
                    {% else %}
                        {% if price == 0 %}
                            <span class="amount pl-md-2">Free</span>
                        {% else %}
                            <span class="amount pl-md-2">€{{price}}</span>
                        {% endif %}
                    {% endif %}
                </ins>
            </div>								
            <a href="{{ cart }}" class="btn btn-primary photos-add-btn">										
                Add to cart
            </a>
        </div>							
    </div>
{% endmacro %}